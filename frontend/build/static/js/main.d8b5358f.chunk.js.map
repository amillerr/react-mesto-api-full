{"version":3,"sources":["images/header/header__logo.svg","images/forms/success.svg","images/forms/failure.svg","components/Header.js","context/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/ImagePopup.js","components/PopupWithForm.js","components/AddPlacePopup.js","utils/api.js","components/EditAvatarPopup.js","components/EditProfilePopup.js","components/Login.js","components/Register.js","components/ProtectedRoute.js","components/InfoTooltip.js","utils/auth.js","components/App.js","index.js"],"names":["module","exports","Header","email","onSignOut","className","src","logo","alt","path","to","exact","onClick","type","CurrentUserContext","React","createContext","Card","card","onCardClick","onCardLike","onCardDelete","currentUser","useContext","isOwn","owner","_id","isLiked","likes","find","i","cardDeleteButtonClassName","cardLikeButtonClassName","aria-label","link","name","length","Main","onEditAvatar","onEditProfile","onAddPlace","cards","style","backgroundImage","avatar","about","map","item","index","key","Footer","ImagePopup","isClose","PopupWithForm","title","isOpen","onClose","children","onSubmit","method","action","noValidate","AddPlacePopup","titleRef","useRef","linkRef","useEffect","current","value","e","preventDefault","ref","id","placeholder","minLength","maxLength","required","api","baseUrl","headers","this","_baseUrl","_headers","Promise","all","getUserInfo","getInitialCards","res","ok","json","reject","status","fetch","then","_getStatus","data","body","JSON","stringify","cardId","like","localStorage","getItem","EditAvatarPopup","onUpdateAvatar","isLoading","avatarRef","EditProfilePopup","onUpdateProfile","useState","setName","setAbout","onChange","target","Login","props","setEmail","password","setPassword","onLogin","Register","onRegister","ProtectedRoute","Component","component","loggedIn","InfoTooltip","isSuccess","SuccessIcon","FailureIcon","BASE_URL","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","selectedCard","setSelectedCard","setCurrentUser","setCards","setLoggedIn","infoTooltipPopup","setInfoTooltipPopup","setIsSuccess","history","useHistory","getServerData","userData","initialCards","catch","error","console","log","handleConfirmRegister","foo","closeAllPopups","tokenCheck","token","jwt","Error","err","push","Provider","removeItem","setItem","auth","message","some","likeCard","newCard","newCards","c","deleteCard","filter","setUserInfo","createCard","changeAvatar","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d8b5358f.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/header__logo.c6f11019.svg\";","module.exports = __webpack_public_path__ + \"static/media/success.e38b395c.svg\";","module.exports = __webpack_public_path__ + \"static/media/failure.4072126c.svg\";","import React from \"react\";\nimport logo from \"../images/header/header__logo.svg\";\nimport { Route, Link } from 'react-router-dom';\n\nfunction Header({email, onSignOut}) {\n\n  return (\n    <header className=\"header\">\n      <img src={logo} alt=\"Место\" className=\"header__logo\" />\n\n        <Route path=\"/sign-up\">\n          <Link className=\"header__auth_link\" to=\"/sign-in\">Войти</Link>\n        </Route>\n        <Route path=\"/sign-in\">\n          <Link className=\"header__auth_link\" to=\"/sign-up\">Регистрация</Link>\n        </Route>\n        <Route exact path=\"/\">\n          <div className=\"header__auth\">\n            <p className=\"header__auth_email\">{ email }</p>\n            <a className=\"header__auth_btn\" onClick={ onSignOut } type=\"button\">Выйти</a>\n          </div>\n        </Route>\n    </header>\n  )\n}\n\nexport default Header;\n","import React from \"react\";\n\nexport const CurrentUserContext = React.createContext()","import React                from \"react\";\nimport {CurrentUserContext} from \"../context/CurrentUserContext\";\n\nfunction Card({card, onCardClick, onCardLike, onCardDelete}) {\n  const currentUser = React.useContext(CurrentUserContext)\n\n  function handleClick() {\n    onCardClick(card);\n  }\n\n  function handleClickLike() {\n    onCardLike(card)\n  }\n\n  function handleClickDelete() {\n    onCardDelete(card)\n  }\n\n  const isOwn = card.owner === currentUser._id;\n  const isLiked = card.likes.find(i => i._id === currentUser._id);\n\n  const cardDeleteButtonClassName = (`element__btn_delete ${isOwn && 'element__btn_delete_active'}`)\n  const cardLikeButtonClassName = (`element__btn_like ${isLiked && 'element__btn_like_active'}`)\n\n  return (\n    <div className=\"element\">\n      <button\n        className={cardDeleteButtonClassName}\n        onClick={handleClickDelete}\n        type=\"button\"\n        aria-label=\"Удалить\"\n      />\n      <img\n        src={card.link}\n        onClick={handleClick}\n        className=\"element__img\"\n        alt={card.link}\n      />\n      <div className=\"element__description\">\n        <h2 className=\"element__name\">{card.name}</h2>\n        <div className=\"element__like-container\">\n          <button\n            className={cardLikeButtonClassName}\n            onClick={handleClickLike}\n            type=\"button\"\n            aria-label=\"Нравиться\"\n          />\n          <span className=\"element__like_counter\">\n            {card.likes.length > 0 ? `${card.likes.length}` : '0'}\n          </span>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Card;\n","import React                from \"react\";\nimport Card                 from \"./Card.js\";\nimport {CurrentUserContext} from \"../context/CurrentUserContext\";\n\nfunction Main({onEditAvatar, onEditProfile, onCardDelete, onAddPlace, cards, onCardClick , onCardLike}) {\n  const currentUser = React.useContext(CurrentUserContext)\n\n  return (\n    <main>\n      <section className=\"profile\">\n        <div className=\"profile__image\">\n          <img\n            alt={\"\"}\n            style={{ backgroundImage: `url(${currentUser.avatar})` }}\n            className=\"profile__avatar\"\n          />\n          <button\n            onClick={onEditAvatar}\n            className=\"profile__avatar_change\"\n            type=\"button\"\n          />\n        </div>\n        <div className=\"profile__info\">\n          <div className=\"profile__edit-form\">\n            <h1 className=\"profile__name\">{currentUser.name}</h1>\n            <button\n              onClick={onEditProfile}\n              className=\"profile__edit-btn\"\n              type=\"button\"\n              aria-label=\"Редактировать\"\n            />\n          </div>\n          <p className=\"profile__description\">{currentUser.about}</p>\n        </div>\n        <button\n          onClick={onAddPlace}\n          className=\"profile__add-btn\"\n          type=\"button\"\n          aria-label=\"Добавить\"\n        />\n      </section>\n\n      <section className=\"elements\">\n        <ul className=\"elements__list\">\n          {cards.map((item, index) =>\n            <Card\n              key={index}\n              card={item}\n              onCardClick={onCardClick}\n              onCardLike={onCardLike}\n              onCardDelete={onCardDelete}\n            />\n          )}\n        </ul>\n      </section>\n    </main>\n  );\n}\n\nexport default Main;\n","import React from \"react\";\n\nfunction Footer() {\n  return (\n    <footer className=\"footer\">\n      <p className=\"footer__copyright\">&copy; 2020. Артём Аксёнов</p>\n    </footer>\n  );\n}\n\nexport default Footer;\n","import React from \"react\";\n\nfunction ImagePopup({ card, isClose }) {\n  return (\n    <section className={`popup popup_image ${card && 'popup_opened'}`}>\n      <figure className=\"popup__image_container\">\n        <button\n          onClick={isClose}\n          className=\"popup__close\"\n          type=\"button\"\n          aria-label=\"Закрыть\"\n        />\n        <img src={`${card.link}`} alt={''} className=\"popup__preview\"/>\n        <figcaption className=\"popup__image-title\">{card.name}</figcaption>\n      </figure>\n    </section>\n  );\n}\n\nexport default ImagePopup;\n","import React from \"react\";\n\nfunction PopupWithForm({name, title, isOpen, onClose, children, onSubmit}) {\n  return (\n    <section\n      className={`popup ${isOpen && 'popup_opened'}`}\n    >\n      <div className=\"popup__container\">\n        <button\n          onClick={onClose}\n          className=\"popup__close\"\n          type=\"button\"\n          aria-label=\"Закрыть\"\n        />\n        <h3 className=\"popup__title\">{title}</h3>\n        <form\n          className=\"popup__form popup__form_edit\"\n          name={name}\n          method=\"POST\"\n          onSubmit={onSubmit}\n          action=\"#\"\n          noValidate\n        >\n          {children}\n        </form>\n      </div>\n    </section>\n  );\n}\n\nexport default PopupWithForm;\n","import React         from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\n\nfunction AddPlacePopup({isOpen, onClose, onAddPlace}) {\n  const titleRef = React.useRef('')\n  const linkRef = React.useRef('')\n\n  React.useEffect(() => {\n    titleRef.current.value = ''\n    linkRef.current.value = ''\n  },[isOpen])\n\n  function handleSubmit(e) {\n    e.preventDefault()\n    onAddPlace ({\n      name: titleRef.current.value,\n      link: linkRef.current.value\n    })\n  }\n\n  return (\n    <PopupWithForm\n      title=\"Новое место\"\n      name=\"form-add\"\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n    >\n      <>\n        <label className=\"popup__label\">\n          <input\n            ref={titleRef}\n            id=\"title-input\"\n            type=\"text\"\n            className=\"popup__input popup__input_type_place\"\n            name=\"title\"\n            placeholder=\"Название\"\n            minLength=\"2\"\n            maxLength=\"30\"\n            required\n          />\n          <span id=\"title-input-error\" className=\"popup__error\" />\n        </label>\n        <label className=\"popup__label\">\n          <input\n            ref={linkRef}\n            id=\"url-input\"\n            type=\"url\"\n            className=\"popup__input popup__input_type_link\"\n            name=\"link\"\n            placeholder=\"Ссылка на картинку\"\n            required\n          />\n          <span id=\"url-input-error\" className=\"popup__error\" />\n        </label>\n        <button className=\"popup__button\" type=\"submit\">\n          Создать\n        </button>\n      </>\n    </PopupWithForm>\n  )\n}\n\nexport default AddPlacePopup\n\n\n","class Api {\n  constructor({ baseUrl, headers }) {\n    this._baseUrl = baseUrl;\n    this._headers = headers;\n  }\n\n  getServerData() {\n    return Promise.all([this.getUserInfo(), this.getInitialCards()])\n  }\n\n  _getStatus(res) {\n    if (res.ok) {\n      return res.json();\n    } else {\n      return Promise.reject(`Error! : ${res.status}`);\n    }\n  }\n  getUserInfo() {\n    return fetch(`${this._baseUrl}/users/me`, {\n      headers: this._headers,\n    }).then(this._getStatus);\n  }\n\n  getInitialCards() {\n    return fetch(`${this._baseUrl}/cards`, {\n      headers: this._headers,\n    }).then(this._getStatus);\n  }\n\n  setUserInfo(data) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      method: \"PATCH\",\n      headers: this._headers,\n      body: JSON.stringify({\n        name: data.name,\n        about: data.about,\n      }),\n    }).then(this._getStatus);\n  }\n\n  changeAvatar(avatar) {\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\n      method: \"PATCH\",\n      headers: this._headers,\n      body: JSON.stringify({\n        avatar: avatar.avatar\n      }),\n    }).then(this._getStatus);\n  }\n\n  createCard(item) {\n    return fetch(`${this._baseUrl}/cards`,  {\n      method: 'POST',\n      headers: this._headers,\n      body: JSON.stringify({\n        name: item.name,\n        link: item.link\n      })\n    }).then(this._getStatus);\n  }\n\n  likeCard(cardId, like) {\n    return fetch(`${this._baseUrl}/cards/likes/${cardId}`, {\n      method: like ? \"PUT\" : \"DELETE\",\n      headers: this._headers,\n    }).then(this._getStatus);\n  }\n\n  deleteCard(id) {\n    return fetch(`${this._baseUrl}/cards/${id}`, {\n      method: \"DELETE\",\n      headers: this._headers,\n    }).then(this._getStatus);\n  }\n}\n\nexport const api = new Api({\n  baseUrl:'http://localhost:4000',\n  headers: {\n    'Authorization': localStorage.getItem('jwt'),\n    'Content-Type': 'application/json'}\n});\n\n","import React         from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\n\nfunction EditAvatarPopup({onUpdateAvatar, isOpen, onClose, isLoading}) {\n  const avatarRef = React.useRef('')\n\n  function handleSubmit(e) {\n    e.preventDefault()\n    onUpdateAvatar({\n      avatar: avatarRef.current.value\n    })\n  }\n\n  React.useEffect(() => {\n    avatarRef.current.value = ''\n  }, [isOpen])\n\n  return (\n    <PopupWithForm\n      title=\"Обновить аватар\"\n      name=\"avatar\"\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n      isLoading={isLoading}\n    >\n      <>\n        <label className=\"popup__label\">\n          <input\n            ref={avatarRef}\n            id=\"avatar-input\"\n            type=\"url\"\n            className=\"popup__input popup__input_type_avatar\"\n            name=\"avatar\"\n            placeholder=\"Ссылка на изображение\"\n            required\n          />\n          <span id=\"avatar-input-error\" className=\"popup__error\" />\n        </label>\n        <button className=\"popup__button\" type=\"submit\">\n          Сохранить\n        </button>\n      </>\n    </PopupWithForm>\n  )\n}\n\nexport default EditAvatarPopup","import React                from \"react\";\nimport PopupWithForm        from \"./PopupWithForm\";\nimport {CurrentUserContext} from \"../context/CurrentUserContext\";\n\nfunction EditProfilePopup({onUpdateProfile, isOpen, onClose, isLoading}) {\n  const currentUser = React.useContext(CurrentUserContext)\n  const [name, setName] = React.useState('')\n  const [about, setAbout] = React.useState('')\n\n  function handleUpdateName(e) {\n    setName(e.target.value)\n  }\n\n  function handleUpdateAbout(e) {\n    setAbout(e.target.value)\n  }\n\n  React.useEffect(() => {\n    setName(currentUser.name)\n    setAbout(currentUser.about)\n  }, [currentUser])\n\n  function handleSubmit(e) {\n    e.preventDefault()\n    onUpdateProfile({\n      name: name,\n      about: about\n    })\n  }\n\n  return (\n    <PopupWithForm\n      title=\"Редактировать профиль\"\n      name=\"form-profile\"\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n      isLoading={isLoading}\n    >\n        <label className=\"popup__label\">\n          <input\n            onChange={handleUpdateName}\n            id=\"name-input\"\n            type=\"text\"\n            className=\"popup__input popup__input_type_name\"\n            value={name ? name : ''}\n            name=\"name\"\n            placeholder=\"Имя\"\n            minLength=\"2\"\n            maxLength=\"40\"\n            required\n          />\n          <span id=\"name-input-error\" className=\"popup__error\" />\n        </label>\n        <label className=\"popup__label\">\n          <input\n            onChange={handleUpdateAbout}\n            id=\"about-input\"\n            type=\"text\"\n            className=\"popup__input popup__input_type_description\"\n            value={about ? about : ''}\n            name=\"about\"\n            placeholder=\"Описание\"\n            minLength=\"2\"\n            maxLength=\"200\"\n            required\n          />\n          <span id=\"about-input-error\" className=\"popup__error\" />\n        </label>\n        <button className=\"popup__button\" type=\"submit\">\n          Сохранить\n        </button>\n    </PopupWithForm>\n  )\n}\n\nexport default EditProfilePopup","import React from \"react\";\n\nfunction Login(props) {\n\n  const [email, setEmail] = React.useState('');\n  const [password, setPassword] = React.useState('')\n\n  const handleChangeEmail = (e)  => {\n    setEmail(e.target.value)\n  }\n\n  const handleChangePassword = (e) => {\n    setPassword(e.target.value)\n  }\n\n  const handleSubmit = (e) => {\n      e.preventDefault()\n    if (!email || !password) {\n      return;\n    }\n    props.onLogin (email, password);\n  }\n\n\n    return (\n      <section className=\"auth\">\n        <form\n          className=\"auth__form\"\n          onSubmit={handleSubmit}\n        >\n          <h3 className=\"auth__title\">Вход</h3>\n          <fieldset className=\"auth__field\">\n            <input\n              name=\"email\"\n              type=\"text\"\n              className=\"auth__input\"\n              value={email || ''}\n              onChange={handleChangeEmail}\n              placeholder=\"Email\"\n              required\n            />\n            <input\n              name=\"password\"\n              type=\"text\"\n              className=\"auth__input\"\n              value={password || ''}\n              onChange={handleChangePassword}\n              required\n              placeholder=\"Пароль\"\n              minLength=\"6\"\n            />\n          </fieldset>\n          <button\n            className=\"auth__btn\"\n            type=\"submit\">\n            Войти\n          </button>\n        </form>\n      </section>\n    )\n}\n\nexport default Login\n\n\n","import React from \"react\";\nimport { Link } from 'react-router-dom';\n\nfunction Register(props) {\n\n  const [email, setEmail] = React.useState('');\n  const [password, setPassword] = React.useState('');\n\n  const handleChangeEmail = (e)  => {\n    setEmail(e.target.value)\n  }\n\n  const handleChangePassword = (e) => {\n    setPassword(e.target.value)\n  }\n\n  const handleSubmit = (e) => {\n    e.preventDefault()\n    props.onRegister(email, password)\n  }\n\n    return (\n      <section className=\"auth\">\n        <form\n          className=\"auth__form\"\n          onSubmit={handleSubmit}\n        >\n          <h3 className=\"auth__title\">Регистрация</h3>\n          <fieldset className=\"auth__field\">\n          <input\n            name=\"email\"\n            type=\"text\"\n            className=\"auth__input\"\n            value={email || ''}\n            onChange={handleChangeEmail}\n            placeholder=\"Email\"\n            required\n          />\n          <input\n            name=\"password\"\n            type=\"text\"\n            className=\"auth__input\"\n            value={password || ''}\n            onChange={handleChangePassword}\n            required\n            placeholder=\"Пароль\"\n            minLength=\"6\"\n          />\n          </fieldset>\n          <button\n            className=\"auth__btn\"\n            type=\"submit\">\n            Зарегистрироваться\n          </button>\n          <Link\n            to=\"/sign-in\"\n            className=\"auth__link\">\n            Уже зарегистрированы? Войти\n          </Link>\n        </form>\n      </section>\n\n    )\n}\n\nexport default Register\n","import React from 'react';\nimport { Route, Redirect } from \"react-router-dom\";\n\nconst ProtectedRoute = ({ component: Component, ...props  }) => {\n  return (\n    <Route>\n      {\n        () => props.loggedIn ? <Component {...props} /> : <Redirect to=\"./sign-in\" />\n      }\n    </Route>\n  )}\n\n  export default ProtectedRoute\n","import React from 'react';\nimport SuccessIcon from '../images/forms/success.svg'\nimport FailureIcon from '../images/forms/failure.svg'\n\nfunction InfoTooltip ({isOpen, onClose, isSuccess}) {\n\n  return (\n    <section\n      className={`popup popup__tooltip ${isOpen && 'popup_opened'}`}\n    >\n      <div className=\"popup__container\">\n        <button\n          onClick={onClose}\n          className=\"popup__close\"\n          type=\"button\"\n          aria-label=\"Закрыть\"\n        />\n          <div className=\"popup__message\">\n            <img className=\"popup__result\" src={ isSuccess ? SuccessIcon : FailureIcon} alt=\"Иконка\"/>\n            <h3 className=\"popup__result-msg\">{ isSuccess ? 'Вы успешно зарегистрировались!' : 'Что-то пошло не так! Попробуйте ещё раз.'}</h3>\n          </div>\n      </div>\n    </section>\n  )\n}\n\nexport default InfoTooltip\n","export const BASE_URL = 'http://localhost:4000';\n\nexport const login = (email, password) => {\n  return fetch(`${BASE_URL}/signin`, {\n      method: 'POST',\n      headers: {\n          'Content-Type': 'application/json'\n      },\n    body: JSON.stringify({email, password})\n})\n    .then((res) => {\n      if (res.status === 200){\n        return res.json();\n      }\n      if (res.status === 400) {\n        console.log('Не передано одно из полей');\n        return false\n      }\n      if (res.status === 401) {\n        console.log('Пользователь с email не найден');\n        return false\n      }\n    })\n    .then((data) => {\n      if (data.token){\n        localStorage.setItem('jwt', data.token);\n        return data;\n      }\n    })\n    .catch((err) => console.log(err))\n};\n\nexport const register = (email, password) => {\n  return fetch(`${BASE_URL}/signup`, {\n      method: 'POST',\n      headers: {\n          'Content-Type': 'application/json'\n      },\n    body: JSON.stringify({email, password})\n  })\n  .then((res) => {\n    if (res.status === 201){\n      return res.json();\n    }\n    if (res.status === 400) {\n        console.log('Некорректно заполнено одно из полей');\n        return false\n    }\n  })\n  .catch((err) => console.log(err))\n}; \n\nexport const getContent = (token) => {\n  return fetch(`${BASE_URL}/users/me`, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`,\n    }\n  })\n  .then((res) => {\n    try {\n      if (res.status === 200) {\n        return res.json()\n      }\n      if (res.status === 400) {\n        throw new Error('Токен не передан или передан не в том формате');\n      }\n      if (res.status === 401) {\n        throw new Error('Переданный токен некорректен');\n      }\n    }\n    catch (e) {\n      console.log(e);\n      return e;\n    }\n  })\n  .then(data => {\n    return data;\n  })\n  .catch((err) => console.log(err))\n}","/* eslint-disable react-hooks/exhaustive-deps */\n  import React, { useEffect } from \"react\";\n  import { Route, Switch, Redirect, useHistory } from 'react-router-dom';\n  import Header from \"./Header\";\n  import Main from \"./Main\";\n  import Footer from \"./Footer\";\n  import ImagePopup from \"./ImagePopup\";\n  import AddPlacePopup from \"./AddPlacePopup\";\n  import {api} from \"../utils/api\";\n  import {CurrentUserContext} from '../context/CurrentUserContext'\n  import EditAvatarPopup from \"./EditAvatarPopup\";\n  import EditProfilePopup from './EditProfilePopup'\n  import PopupWithForm from \"./PopupWithForm\";\n  import Login from './Login'\n  import Register from './Register'\n  import ProtectedRoute from \"./ProtectedRoute\";\n  import InfoTooltip from './InfoTooltip'\n\n  import * as auth from '../utils/auth'\n\n  function App() {\n    const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false); //\n    const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false); //\n    const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false); //\n    const [selectedCard, setSelectedCard] = React.useState(\"\"); //\n    const [currentUser, setCurrentUser] = React.useState({}); //\n    const [cards, setCards] = React.useState([]); //\n\n    const [loggedIn, setLoggedIn] = React.useState(false); //\n    const [infoTooltipPopup, setInfoTooltipPopup] = React.useState(false); //\n    const [isSuccess, setIsSuccess] = React.useState(false); //\n    const [email, setEmail] = React.useState(''); //\n    const history = useHistory(); //\n\n    useEffect(() => {\n      if (loggedIn) {\n        api.getServerData()\n        .then(([userData, initialCards]) => {\n          setCurrentUser(userData)\n          setCards(initialCards);\n        })\n        .catch(error => console.log(error))\n        }\n      }, [loggedIn]);\n\n\n    function handleEditProfileClick() {\n      setIsEditProfilePopupOpen(true);\n    }\n\n    function handleAddPlaceClick() {\n      setIsAddPlacePopupOpen(true);\n    }\n\n    function handleEditAvatarClick() {\n      setIsEditAvatarPopupOpen(true);\n    }\n    \n    const handleConfirmRegister = (foo) => {\n      setInfoTooltipPopup(true)\n      setIsSuccess(foo)\n    }\n\n    function closeAllPopups() {\n      setIsEditProfilePopupOpen(false);\n      setIsAddPlacePopupOpen(false);\n      setIsEditAvatarPopupOpen(false);\n      setSelectedCard('');\n      setInfoTooltipPopup(false)\n    }\n\n    function handleCardClick(card) {\n      setSelectedCard(card);\n    }\n\n    function handleUpdateAvatar(data) {\n      api.changeAvatar(data)\n        .then((res) => {\n          setCurrentUser(res)\n          closeAllPopups()\n        })\n        .catch(error => console.log(error))\n    }\n\n    function handleUpdateUser(data) {\n      api.setUserInfo(data)\n        .then((res) => {\n          setCurrentUser(res)\n          closeAllPopups()\n        })\n        .catch(error => console.log(error))\n    }\n\n    function handleDeleteCard(card) {\n      api.deleteCard(card._id)\n        .then(() => {\n          const newCards = cards.filter((c) => c._id !== card._id)\n          setCards(newCards)\n        })\n        .catch(error => console.log(error))\n    }\n\n    function handleLikeCard(card) {\n      const isLiked = card.likes.some(i => i._id === currentUser._id)\n\n      api.likeCard(card._id, !isLiked)\n        .then((newCard) => {\n          const newCards = cards.map((c) => c._id === card._id ? newCard : c)\n          setCards(newCards)\n        })\n        .catch(error => console.log(error))\n    }\n\n    function handleAddPlaceSubmit(item) {\n      api.createCard(item)\n        .then((res) => {\n          setCards([res, ...cards])\n          closeAllPopups()\n        })\n        .catch(error => console.log(error))\n    }\n\n    const tokenCheck = () => {\n      const jwt = localStorage.getItem('jwt');\n      if (jwt) {\n        auth.getContent(jwt)\n        .then((res) => {\n          if (res) {\n            setLoggedIn(true)\n            setEmail(res.email)\n            history.push('/')\n          }\n        })\n        .catch((err) => {console.log(err)})\n        history.push('./sign-in');\n      }\n    }\n\n    const handleRegister = (email, password) => {\n      auth.register(email, password)\n        .then((res) => {\n          if (res) {\n            handleConfirmRegister(true)\n            history.push('./sign-in')\n          } else {\n            handleConfirmRegister(false);\n          }\n        })\n        .catch((err) => {console.log(err.message)})\n    }\n\n    const handleLogin = (email, password) => {\n      auth.login(email, password)\n      .then(data => {\n        if (data.token) {\n          setEmail(email)\n          setLoggedIn(true)\n          history.push('/')\n          }\n        })\n        .catch((err) => {console.log(err.message)})\n    }\n\n    const onSignOut = () => {\n      localStorage.removeItem('jwt')\n      history.push('/')\n      setEmail('')\n      setLoggedIn(false)\n    }\n\n    useEffect(() => {\n      tokenCheck();\n    }, []);\n\n      return (\n      <CurrentUserContext.Provider value={currentUser}>\n        <div className=\"root\">\n          <div className=\"page\">\n            <Header\n              email={email}\n              onSignOut={onSignOut}\n              loggedIn={loggedIn}\n            />\n            <Switch>\n\n              <Route path='/sign-in'>\n                <Login\n                  onLogin={handleLogin}\n                />\n              </Route>\n\n              <Route path='/sign-up'>\n                <Register\n                  onRegister={handleRegister}\n                />\n              </Route>\n\n            <ProtectedRoute \n              path=\"/\" \n              loggedIn={loggedIn} \n              component={Main}\n              onEditProfile={handleEditProfileClick}\n              onAddPlace={handleAddPlaceClick}\n              onEditAvatar={handleEditAvatarClick}\n              onCardClick={handleCardClick}\n              cards={cards}\n              onCardLike={handleLikeCard}\n              onCardDelete={handleDeleteCard}\n            />\n\n            <Route path='/'>\n              {loggedIn ? <Redirect to='/'/> : <Redirect to='/sign-in'/>}\n            </Route>\n\n            </Switch>\n\n            <Footer />\n\n            <EditProfilePopup\n              isOpen={isEditProfilePopupOpen}\n              onClose={closeAllPopups}\n              onUpdateProfile={handleUpdateUser}\n            />\n\n            <AddPlacePopup\n              isOpen={isAddPlacePopupOpen}\n              onClose={closeAllPopups}\n              onAddPlace={handleAddPlaceSubmit}\n            />\n\n            <EditAvatarPopup\n              isOpen={isEditAvatarPopupOpen}\n              onClose={closeAllPopups}\n              onUpdateAvatar={handleUpdateAvatar}\n            />\n\n            <PopupWithForm\n              title=\"Вы уверены?\"\n              name=\"form-confirm\"\n              onClose={closeAllPopups}>\n\n            </PopupWithForm>\n\n            <ImagePopup\n              card={selectedCard}\n              isClose={closeAllPopups}\n            />\n\n            <InfoTooltip\n              isOpen={infoTooltipPopup}\n              onClose={closeAllPopups}\n              isSuccess={isSuccess}\n            />\n\n          </div>\n        </div>\n      </CurrentUserContext.Provider>\n    );\n  }\n\n  export default App;\n","import React from 'react';\nimport ReactDOM           from 'react-dom';\nimport {BrowserRouter} from \"react-router-dom\";\nimport './index.css';\nimport App                from './components/App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App/>\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}